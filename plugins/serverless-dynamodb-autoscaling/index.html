<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Dynamodb Autoscaling - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-dynamodb-autoscaling/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Dynamodb Autoscaling - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 4, Stargazer Count: 56, Forks Count: 6, Watchers Count: 56."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Dynamodb Autoscaling</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/sbstjn/serverless-dynamodb-autoscaling"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/sbstjn/serverless-dynamodb-autoscaling </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 1021" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">1021</dd> </dl> <dl title="Open Issue Count: 4" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">4</dd> </dl> <dl title="Stargazer Count: 56" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">56</dd> </dl> <dl title="Forks Count: 6" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">6</dd> </dl> <dl title="Watchers Count: 56" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">56</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="️-serverless-plugin-for-dynamodb-auto-scaling">⚡️ Serverless Plugin for DynamoDB Auto Scaling</h1> <p><a href="https://www.npmjs.com/package/serverless-dynamodb-autoscaling"><img src="https://img.shields.io/npm/v/serverless-dynamodb-autoscaling.svg" alt="npm" /></a> <a href="https://circleci.com/gh/sbstjn/serverless-dynamodb-autoscaling"><img src="https://img.shields.io/circleci/project/github/sbstjn/serverless-dynamodb-autoscaling/master.svg" alt="CircleCI" /></a> <a href="https://github.com/sbstjn/serverless-dynamodb-autoscaling/blob/master/LICENSE.md"><img src="https://img.shields.io/github/license/sbstjn/serverless-dynamodb-autoscaling.svg" alt="license" /></a> <a href="https://coveralls.io/github/sbstjn/serverless-dynamodb-autoscaling"><img src="https://img.shields.io/coveralls/sbstjn/serverless-dynamodb-autoscaling.svg" alt="Coveralls" /></a></p> <p>With this plugin for <a href="https://serverless.com">serverless</a>, you can enable DynamoDB Auto Scaling for tables and <strong>Global Secondary Indexes</strong> easily in your <code class="highlighter-rouge">serverless.yml</code> configuration file. The plugin supports multiple tables and indexes, as well as separate configuration for <code class="highlighter-rouge">read</code> and <code class="highlighter-rouge">write</code> capacities using Amazon’s <a href="https://aws.amazon.com/blogs/aws/new-auto-scaling-for-amazon-dynamodb/">native DynamoDB Auto Scaling</a>.</p> <h2 id="usage">Usage</h2> <p>Add the <a href="https://www.npmjs.com/package/serverless-dynamodb-autoscaling">NPM package</a> to your project:</p> <div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Via yarn</span>
<span class="gp">$ </span>yarn add serverless-dynamodb-autoscaling

<span class="c"># Via npm</span>
<span class="gp">$ </span>npm install serverless-dynamodb-autoscaling
</code></pre></div> <p>Add the plugin to your <code class="highlighter-rouge">serverless.yml</code>:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-dynamodb-autoscaling</span>
</code></pre></div> <h2 id="configuration">Configuration</h2> <p>Configure DynamoDB Auto Scaling in <code class="highlighter-rouge">serverless.yml</code> with references to your DynamoDB CloudFormation resources for the <code class="highlighter-rouge">table</code> property. The <code class="highlighter-rouge">index</code> configuration is optional to apply Auto Scaling <em>Global Secondary Index</em>.</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">capacities</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">table</span><span class="pi">:</span> <span class="s">CustomTable</span>  <span class="c1"># DynamoDB Resource</span>
      <span class="s">index</span><span class="pi">:</span>              <span class="c1"># List or single index name</span>
        <span class="pi">-</span> <span class="s">custom-index-name</span>
      <span class="s">read</span><span class="pi">:</span>
        <span class="s">minimum</span><span class="pi">:</span> <span class="s">5</span>        <span class="c1"># Minimum read capacity</span>
        <span class="s">maximum</span><span class="pi">:</span> <span class="s">1000</span>     <span class="c1"># Maximum read capacity</span>
        <span class="s">usage</span><span class="pi">:</span> <span class="s">0.75</span>       <span class="c1"># Targeted usage percentage</span>
      <span class="s">write</span><span class="pi">:</span>
        <span class="s">minimum</span><span class="pi">:</span> <span class="s">40</span>       <span class="c1"># Minimum write capacity</span>
        <span class="s">maximum</span><span class="pi">:</span> <span class="s">200</span>      <span class="c1"># Maximum write capacity</span>
        <span class="s">usage</span><span class="pi">:</span> <span class="s">0.5</span>        <span class="c1"># Targeted usage percentage</span>
</code></pre></div> <p>That’s it! With the next deployment, <a href="https://serverless.com">serverless</a> will add a CloudFormation configuration to enable Auto Scaling for the DynamoDB resources <code class="highlighter-rouge">CustomTable</code> and its <em>Global Secondary Index</em> called <code class="highlighter-rouge">custom-index-name</code>.</p> <p>You must provide at least a configuration for <code class="highlighter-rouge">read</code> or <code class="highlighter-rouge">write</code> to enable Auto Scaling!</p> <h3 id="defaults">Defaults</h3> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">maximum</span><span class="pi">:</span> <span class="s">200</span>
<span class="s">minimum</span><span class="pi">:</span> <span class="s">5</span>
<span class="s">usage</span><span class="pi">:</span> <span class="s">0.75</span>
</code></pre></div> <h3 id="index">Index</h3> <p>If you only want to enable Auto Scaling for the index, use <code class="highlighter-rouge">indexOnly: true</code> to skip Auto Scaling for the general DynamoDB table.</p> <h3 id="api-throtteling">API Throtteling</h3> <p>CloudWatch has very strict <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_limits.html">API rate limits</a>! If you plan to configure Auto Scaling for multiple DynamoDB tables or <em>Global Secondary Indexes</em>, request an increase of the rate limits first! Otherwise, you might run into an error like this:</p> <div class="highlighter-rouge"><pre class="highlight"><code>An error occurred while provisioning your stack: XYZ - Unable to create alarms for scaling policy XYZ due to reason: 
Rate exceeded (Service: AmazonCloudWatch; Status Code: 400; Error Code: Throttling; Request ID: XYZ).
</code></pre></div> <h3 id="breaking-changes">Breaking Changes</h3> <p><em>There have been multiple breaking changes regarding CloudFormation resource names in the past. If you end up with an error, that your CloudFormation Stack cannot be updated, try to remove the <code class="highlighter-rouge">custom &gt; capacities</code> configuration from your <code class="highlighter-rouge">serverless.yml</code> file and deploy the service without any Auto Scaling configuration. After that, just re-add your previous configuration and deploy your service again.</em></p> <h2 id="dynamodb">DynamoDB</h2> <p>The example serverless configuration above works fine for a DynamoDB table CloudFormation resource like this:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">resources</span><span class="pi">:</span>
  <span class="s">Resources</span><span class="pi">:</span>
    <span class="s">CustomTable</span><span class="pi">:</span>
      <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::DynamoDB::Table</span>
      <span class="s">Properties</span><span class="pi">:</span>
        <span class="s">TableName</span><span class="pi">:</span> <span class="s">custom-table</span>
        <span class="s">AttributeDefinitions</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">AttributeName</span><span class="pi">:</span> <span class="s">key</span>
            <span class="s">AttributeType</span><span class="pi">:</span> <span class="s">S</span>
        <span class="s">KeySchema</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">AttributeName</span><span class="pi">:</span> <span class="s">key</span>
            <span class="s">KeyType</span><span class="pi">:</span> <span class="s">HASH</span>
        <span class="s">ProvisionedThroughput</span><span class="pi">:</span>
          <span class="s">ReadCapacityUnits</span><span class="pi">:</span> <span class="s">5</span>
          <span class="s">WriteCapacityUnits</span><span class="pi">:</span> <span class="s">5</span>
        <span class="s">GlobalSecondaryIndexes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">IndexName</span><span class="pi">:</span> <span class="s">custom-index-name</span>
            <span class="s">KeySchema</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">AttributeName</span><span class="pi">:</span> <span class="s">key</span>
                <span class="s">KeyType</span><span class="pi">:</span> <span class="s">HASH</span>
            <span class="s">Projection</span><span class="pi">:</span>
              <span class="s">ProjectionType</span><span class="pi">:</span> <span class="s">ALL</span>
            <span class="s">ProvisionedThroughput</span><span class="pi">:</span>
              <span class="s">ReadCapacityUnits</span><span class="pi">:</span> <span class="s">5</span>
              <span class="s">WriteCapacityUnits</span><span class="pi">:</span> <span class="s">5</span>
</code></pre></div> <h2 id="license">License</h2> <p>Feel free to use the code, it’s released using the <a href="LICENSE.md">MIT license</a>.</p> <h2 id="thanks">Thanks</h2> <ul> <li><a href="https://github.com/TrentBartlem">TrentBartlem</a>’s <a href="https://gist.github.com/TrentBartlem/292be37d496361d551fff6659d87fb0e">Gist</a></li> <li><a href="https://forums.aws.amazon.com/message.jspa?messageID=789667#jive-message-792127">daniel</a>’s post in the AWS Developer Forums</li> </ul> <h2 id="contribution">Contribution</h2> <p>You are welcome to contribute to this project! 😘</p> <p>To make sure you have a pleasant experience, please read the <a href="CODE_OF_CONDUCT.md">code of conduct</a>. It outlines core values and beliefs and will make working together a happier experience.</p> <h3 id="local-development">Local Development</h3> <p>If you plan to change the TypeScript files and link the package to another project, use the <code class="highlighter-rouge">link</code> and <code class="highlighter-rouge">build</code> yarn commands:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ &gt; yarn link
$ &gt; yarn build:watch # or "yarn build"
</code></pre></div> <p>Use your local build of the package in another project:</p> <div class="highlighter-rouge"><pre class="highlight"><code>$ &gt; yarn link serverless-dynamodb-autoscaling
</code></pre></div> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
