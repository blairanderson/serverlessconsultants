<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Aws Documentation - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-aws-documentation/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Aws Documentation - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 7, Stargazer Count: 60, Forks Count: 27, Watchers Count: 60."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Aws Documentation</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/9cookies/serverless-aws-documentation"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/9cookies/serverless-aws-documentation </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 2582" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">2582</dd> </dl> <dl title="Open Issue Count: 7" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">7</dd> </dl> <dl title="Stargazer Count: 60" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">60</dd> </dl> <dl title="Forks Count: 27" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">27</dd> </dl> <dl title="Watchers Count: 60" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">60</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <p><a href="http://www.serverless.com"><img src="http://public.serverless.com/badges/v3.svg" alt="serverless" /></a> <a href="https://travis-ci.org/9cookies/serverless-aws-documentation"><img src="https://travis-ci.org/9cookies/serverless-aws-documentation.svg?branch=master" alt="Build Status" /></a> <a href="https://codecov.io/gh/9cookies/serverless-aws-documentation"><img src="https://codecov.io/gh/9cookies/serverless-aws-documentation/branch/master/graph/badge.svg" alt="codecov" /></a> <a href="https://raw.githubusercontent.com/hyperium/hyper/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT licensed" /></a></p> <h1 id="serverless-aws-documentation">Serverless AWS Documentation</h1> <p>This is a <a href="http://www.serverless.com">Serverless</a> v1 plugin that adds support for AWS API Gateway documentation and models (e.g. to export a Swagger JSON file with input/output definitions and full text documentation for API documentation).</p> <h2 id="what-is-aws-api-gateway-documentation">What is AWS API Gateway documentation?</h2> <p>Amazon introduced a new documentation feature for it’s API Gateway on AWS on December 1st. With this you can add manually written documentation to all parts of API Gateway such as resources, requests, responses or single path or query parameters. When exporting Swagger from API Gateway these documentation is added to the other information to create a more human understandable documentation.</p> <p>In addition to this documentation this plugin also adds support to add models to API Gateway and use it with the serverless functions. Models are JSON Schemas that define the structure of request or response bodies. This includes property structure, their types and their validation. More about this you’ll find here: https://spacetelescope.github.io/understanding-json-schema/</p> <h2 id="install">Install</h2> <p>This plugin only works for Serverless 1.0 and up. For a plugin that supports 0.5 look at <a href="https://github.com/HyperBrain/serverless-models-plugin">this plugin</a>.</p> <p>To install this plugin, add <code class="highlighter-rouge">serverless-aws-documentation</code> to your package.json:</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install serverless-aws-documentation --save-dev
</code></pre></div> <p>Next, add the <code class="highlighter-rouge">serverless-aws-documenation</code> plugin in to serverless.yml file: If you don’t already have a plugins section, create one that looks like this:</p><pre><code class="language-YAML">plugins:
  - serverless-aws-documentation
</code></pre><p>To verify that the plugin was added successfully, run this in your command line:</p> <div class="highlighter-rouge"><pre class="highlight"><code>serverless
</code></pre></div> <p>The plugin should show up in the “Plugins” section of the output as “ServerlessAWSDocumentation”</p> <h2 id="example-serverlessyml">Example serverless.yml</h2> <p>You can find a fully functioning serverless project with examples of documentation in the <code class="highlighter-rouge">./example/</code> directory. See the <a href="./example/README.md">README.md</a> in there for more details.</p> <h2 id="usage">Usage</h2> <p>There are two places you need to touch in the <code class="highlighter-rouge">serverless.yml</code>: <em>custom variables</em> to define your general documentation descriptions and models, and the <em>http</em> events in your <code class="highlighter-rouge">functions</code> section to add these models to your requests and responses and add description to function relevant parts.</p> <h3 id="define-descriptions-for-your-documentation">Define descriptions for your documentation</h3> <p>For manual full text descriptions for the parts of your API you need to describe it’s structure. In the general part you can describe your API in general, authorizers, models and resources. If you want to find out more about models, you can skip to the next section.</p> <hr /> <h4 id="gotcha-with-version-and-title-on-the-api">Gotcha with ‘version’ and ‘title’ on the API</h4> <p>Currently (August 2017) you’ll have trouble with the <code class="highlighter-rouge">title</code> and <code class="highlighter-rouge">version</code> fields for you API description. If you define them as below, they’ll be correctly created in API Gateway (you can see it in the web console) but when you export the Swagger document from API Gateway, your title and version will be ignored and replaced with something like:</p> <div class="highlighter-rouge"><pre class="highlight"><code>version: "2017-08-23T07:59:29Z"
title: dev-your-api-serverless
</code></pre></div> <hr /> <p>Your general documentation has to be nested in the custom variables section and looks like this:</p><pre><code class="language-YAML">custom:
  documentation:
    info:
      version: "2" # see note above about this being ignored
      title: "Name of your API" # see note above about this being ignored
      description: "This is the best API ever"
      termsOfService: "http://www.example.com/terms-of-service"
      contact:
        name: "John Smith"
        url: "http://www.example.com/me"
        email: "js@example.com"
      license:
        name: "Licensing"
        url: "http://www.example.com/licensing"
    tags:
      -
        name: "Data Creation"
        description: "Services to create things"
      -
        name: "Some other tag"
        description: "A tag for other things"
    authorizers:
      -
        name: "MyCustomAuthorizer"
        description: "This is an error"
    resources:
      -
        path: "some/path"
        description: "This is the description for some/path"
      -
        path: "some/other/path"
        description: "This is the description for some/other/path"
</code></pre><p>Your documentation has to be nested in the <code class="highlighter-rouge">documentation</code> custom variable. You describe your documentation parts with the <code class="highlighter-rouge">description</code> and <code class="highlighter-rouge">summary</code> (or <code class="highlighter-rouge">title</code> for the API itself) properties. The summary is some sort of title and the description is for further explanation. You can see the expected format in the <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#info-object">Swagger v2 specification for the info object</a>.</p> <p>On the upper level, under the <code class="highlighter-rouge">documentation</code> section, you describe your API in the <code class="highlighter-rouge">info</code> object. In there you also can manually describe the version (needs to be a string). If you don’t define the version, the version that API Gateway needs will automatically be generated. This auto version is a hash of the documentation you defined, so if you don’t change your documentation, the documentation in API Gateway won’t be touched.</p> <p>Underneath you can define <code class="highlighter-rouge">tags</code>, <code class="highlighter-rouge">authorizers</code>, <code class="highlighter-rouge">resources</code> and <code class="highlighter-rouge">models</code> which are all lists of descriptions. In addition to the description and the summary, Authorizers need the name of the authorizer, resources need the path of the described resource and models need the name of the model. Tags provides the description for tags that are used on <code class="highlighter-rouge">METHOD</code>s (HTTP events), <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#tag-object">more info here</a>.</p> <h3 id="define-the-models">Define the models</h3> <p>Models have additional information you have to define. Besides the model name, the description and the summary, you need to define the <em>content type</em> for this model in addition to the <em>schema</em> that describes the model:</p> <ul> <li><code class="highlighter-rouge">contentType</code>: the content type of the described request/response (like <code class="highlighter-rouge">"application/json"</code> or <code class="highlighter-rouge">"application/xml"</code>). This is mandatory.</li> <li><code class="highlighter-rouge">schema</code>: The JSON Schema that describes the model. In the examples below external files are imported, but you can also define the schema inline using YAML format.</li> </ul> <p>Your models definition could look like this:</p><pre><code class="language-YAML">custom:
  documentation:
    models:
      -
        name: "ErrorResponse"
        description: "This is an error"
        contentType: "application/json"
        schema: ${file(models/error.json)}
      -
        name: "CreateRequest"
        description: "Model for creating something"
        contentType: "application/json"
        schema: ${file(models/create_request.json)}
</code></pre><h3 id="function-specific-documentation">Function specific documentation</h3> <p>When you want to describe the parts inside a <code class="highlighter-rouge">RESOURCE</code> you need to do this in the functions described in your <code class="highlighter-rouge">serverless.yml</code>. Inside the <code class="highlighter-rouge">http</code> event of your functions you need to add the <code class="highlighter-rouge">documentation</code> property which can hold the following parts:</p> <ul> <li>The method description which is described directly inside the <code class="highlighter-rouge">documentation</code> property</li> <li><code class="highlighter-rouge">requestBody</code>: The body of your HTTP request</li> <li><code class="highlighter-rouge">requestHeaders</code>: A list of headers for your HTTP request (needs <code class="highlighter-rouge">name</code> of the header)</li> <li><code class="highlighter-rouge">queryParams</code>: A list of query parameters (needs <code class="highlighter-rouge">name</code> of the parameter)</li> <li><code class="highlighter-rouge">pathParams</code>: A list of path parameters (needs <code class="highlighter-rouge">name</code> of the parameter)</li> <li><code class="highlighter-rouge">methodResponses</code>: A list of method responses (needs the <code class="highlighter-rouge">statusCode</code> of the response)</li> <li><code class="highlighter-rouge">tags</code>: A list of tags apply to the <code class="highlighter-rouge">METHOD</code>, which is the HTTP event in serverless. Used in <a href="https://swagger.io/swagger-ui/">Swagger-UI</a></li> </ul> <p>The methodResponses itself can have the following parts:</p> <ul> <li><code class="highlighter-rouge">responseBody</code>: The body of the HTTP request</li> <li><code class="highlighter-rouge">responseHeaders</code>: A list of headers for your HTTP response (needs <code class="highlighter-rouge">name</code> of the header)</li> </ul> <p>With this your function definition could look like this:</p><pre><code class="language-YAML">createItem:
  handler: handler.create
  events:
    - http:
        path: create
        method: post
        documentation:
          summary: "Create something"
          description: "Creates the thing you need"
          tags:
            - "Data Creation"
            - "Some other tag"
          requestBody:
            description: "Request body description"
          requestHeaders:
            -
              name: "x-header"
              description: "Header description"
            -
              name: "Authorization"
              description: "Auth Header description"
          queryParams:
            -
              name: "sid"
              description: "Session ID"
            -
              name: "theme"
              description: "Theme for for the website"
          pathParams:
            -
              name: "id"
              description: "ID of the thing you want to create"
          requestModels:
            "application/json": "CreateRequest"
            "application/xml": "CreateRequestXml"
          methodResponses:
            -
              statusCode: "200"
              responseBody:
                description: "Response body description"
              responseHeaders:
                -
                  name: "x-superheader"
                  description: "this is a super header"
              responseModels:
                "application/json": "CreateResponse"
            -
              statusCode: "400"
              responseModels:
                "application/json": "ErrorResponse"
</code></pre><p>To add your defined models to the function you also need the following properties.</p> <h4 id="requestmodels">requestModels</h4> <p>In the <code class="highlighter-rouge">requestModels</code> property you can add models for the HTTP request of the function. You can have multiple models for different <code class="highlighter-rouge">ContentType</code>s. Inside the <code class="highlighter-rouge">requestModels</code> property you define the content type as the key and the model name defined in the models section above as the value. Here’s short example:</p><pre><code class="language-YAML">requestModels:
  "application/json": "CreateRequest"
  "application/xml": "CreateRequestXml"
</code></pre><h4 id="methodresponsesresponsemodels">methodResponses.responseModels</h4> <p>In the <code class="highlighter-rouge">methodResponses</code> property you can define multiple response models for this function. The response models are described in the <code class="highlighter-rouge">ResponseModels</code> property which contains the models for the different content types. These response models are described like the <code class="highlighter-rouge">requestModels</code> above.</p><pre><code class="language-YAML">methodResponses:
  -
    statusCode: "200"
    responseModels:
      "application/json": "CreateResponse"
      "application/xml": "CreateResponseXml"
  -
    statusCode: "400"
    responseModels:
      "application/json": "ErrorResponse"
</code></pre><p>In the full example above you also can see the definition of the <code class="highlighter-rouge">requestModels</code> and <code class="highlighter-rouge">responseModels</code> in a the context of the documenatation.</p> <h3 id="deploy-the-documentation">Deploy the documentation</h3> <p>To deploy the models you described above you just need to use <code class="highlighter-rouge">serverless deploy</code> as you are used to.</p> <p>If you’ve defined <code class="highlighter-rouge">requestHeaders</code> in your documentation this will add those request headers to the CloudFormation being deployed, if you haven’t already defined those request parameters yourself. If you don’t want this, add the option <code class="highlighter-rouge">--doc-safe-mode</code> when deploying. If you use that option you need to define the request parameters manually to have them included in the documentation, e.g.</p><pre><code class="language-YAML">ApiGatewayMethod{normalizedPath}{normalizedMethod}:
  Properties:
    RequestParameters:
      method.request.header.{header-name}: true|false
</code></pre><p>See the Serverless documentation for more information on <a href="https://serverless.com/framework/docs/providers/aws/guide/resources/">resource naming</a>, and the AWS documentation for more information on <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-apitgateway-method-integration.html#cfn-apigateway-method-integration-requestparameters">request parameters</a>.</p> <h2 id="contribution">Contribution</h2> <p>When you think something is missing or found some bug, please add an issue to this repo. If you want to contribute code, just fork this repo and create a PR when you are finished. Pull Requests are only accepted when there are unit tests covering your code.</p> <h2 id="license">License</h2> <p>MIT</p> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
