<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Python Requirements - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-python-requirements/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Python Requirements - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 18, Stargazer Count: 84, Forks Count: 25, Watchers Count: 84."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Python Requirements</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/UnitedIncome/serverless-python-requirements"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/UnitedIncome/serverless-python-requirements </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 4890" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">4890</dd> </dl> <dl title="Open Issue Count: 18" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">18</dd> </dl> <dl title="Stargazer Count: 84" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">84</dd> </dl> <dl title="Forks Count: 25" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">25</dd> </dl> <dl title="Watchers Count: 84" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">84</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="serverless-python-requirements">Serverless Python Requirements</h1> <p><a href="http://www.serverless.com"><img src="http://public.serverless.com/badges/v3.svg" alt="serverless" /></a> <a href="https://circleci.com/gh/UnitedIncome/serverless-python-requirements"><img src="https://img.shields.io/circleci/project/github/RedSparr0w/node-csgo-parser/master.svg" alt="circleci" /></a> <a href="https://www.npmjs.com/package/serverless-python-requirements"><img src="https://nodei.co/npm/serverless-python-requirements.png?mini=true" alt="npm" /></a></p> <p>A Serverless v1.x plugin to automatically bundle dependencies from <code class="highlighter-rouge">requirements.txt</code> and make them available in your <code class="highlighter-rouge">PYTHONPATH</code>.</p> <p><strong>Requires Serverless &gt;= v1.12</strong></p> <h2 id="install">Install</h2> <div class="highlighter-rouge"><pre class="highlight"><code>sls plugin install -n serverless-python-requirements
</code></pre></div> <h2 id="cross-compiling">Cross compiling!</h2> <p>Compiling non-pure-Python modules or fetching their manylinux wheels is supported on non-linux OSs via the use of Docker and the <a href="https://github.com/lambci/docker-lambda">docker-lambda</a> image. To enable docker usage, add the following to your <code class="highlighter-rouge">serverless.yml</code>:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">dockerizePip</span><span class="pi">:</span> <span class="s">true</span>
</code></pre></div> <p>To utilize your own Docker container instead of the default, add the following to your <code class="highlighter-rouge">serverless.yml</code>:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">dockerImage</span><span class="pi">:</span> <span class="s">&lt;image name&gt;:tag</span>
</code></pre></div> <p>This must be the full image name and tag to use, including the runtime specific tag if applicable.</p> <h2 id="experimental-pipenv-support-sparklescakesparkles">Experimental Pipenv support :sparkles::cake::sparkles:</h2> <p>If you include a <code class="highlighter-rouge">Pipfile</code> and have <code class="highlighter-rouge">pipenv</code> installed instead of a <code class="highlighter-rouge">requirements.txt</code> this will use <code class="highlighter-rouge">pipenv</code> to install your requirements and link them. It doesn’t currently work with either the <code class="highlighter-rouge">zip</code> or <code class="highlighter-rouge">dockerizePip</code> options.</p> <h2 id="dealing-with-lambdas-size-limitations">Dealing with Lambda’s size limitations</h2> <p>To help deal with potentially large dependencies (for example: <code class="highlighter-rouge">numpy</code>, <code class="highlighter-rouge">scipy</code> and <code class="highlighter-rouge">scikit-learn</code>) there is support for compressing the libraries. This does require a minor change to your code to decompress them. To enable this add the following to your <code class="highlighter-rouge">serverless.yml</code>:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">zip</span><span class="pi">:</span> <span class="s">true</span>
</code></pre></div> <p>and add this to your handler module before any code that imports your deps:</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
  <span class="kn">import</span> <span class="nn">unzip_requirements</span>
<span class="k">except</span> <span class="nb">ImportError</span><span class="p">:</span>
  <span class="k">pass</span>
</code></pre></div> <h2 id="omitting-packages">Omitting Packages</h2> <p>You can omit a package from deployment with the <code class="highlighter-rouge">noDeploy</code> option. Note that dependencies of omitted packages must explicitly be omitted too. By default, this will not install the AWS SDKs that are already installed on Lambda. This example makes it instead omit pytest:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">noDeploy</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">pytest</span>
</code></pre></div> <h2 id="extra-config-options">Extra Config Options</h2> <h3 id="extra-pip-arguments">extra pip arguments</h3> <p>You can specify extra arguments to be passed to pip like this:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
      <span class="s">dockerizePip</span><span class="pi">:</span> <span class="s">true</span>
      <span class="s">pipCmdExtraArgs</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">--cache-dir</span>
          <span class="pi">-</span> <span class="s">.requirements-cache</span>
</code></pre></div> <h3 id="customize-requirements-file-name">Customize requirements file name</h3> <p><a href="https://www.kennethreitz.org/essays/a-better-pip-workflow">Some <code class="highlighter-rouge">pip</code> workflows involve using requirements files not named <code class="highlighter-rouge">requirements.txt</code></a>. To support these, this plugin has the following option:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">fileName</span><span class="pi">:</span> <span class="s">requirements-prod.txt</span>
</code></pre></div> <h3 id="customize-python-executable">Customize Python executable</h3> <p>Sometimes your Python executable isn’t available on your <code class="highlighter-rouge">$PATH</code> as <code class="highlighter-rouge">python2.7</code> or <code class="highlighter-rouge">python3.6</code> (for example, windows or using pyenv). To support this, this plugin has the following option:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">pythonRequirements</span><span class="pi">:</span>
    <span class="s">pythonBin</span><span class="pi">:</span> <span class="s">/opt/python3.6/bin/python</span>
</code></pre></div> <h2 id="manual-invocations">Manual invocations</h2> <p>The <code class="highlighter-rouge">.requirements</code> and <code class="highlighter-rouge">requirements.zip</code>(if using zip support) files are left behind to speed things up on subsequent deploys. To clean them up, run <code class="highlighter-rouge">sls requirements clean</code>. You can also create them (and <code class="highlighter-rouge">unzip_requirements</code> if using zip support) manually with <code class="highlighter-rouge">sls requirements install</code>.</p> <h2 id="invalidate-requirements-caches-on-package">Invalidate requirements caches on package</h2> <p>If you are using your own Python library, you have to cleanup <code class="highlighter-rouge">.requirements</code> on any update. You can use the following option to cleanup <code class="highlighter-rouge">.requirements</code> everytime you package.</p> <div class="highlighter-rouge"><pre class="highlight"><code>custom:
  pythonRequirements:
    invalidateCaches: true
</code></pre></div> <h2 id="contributors">Contributors</h2> <ul> <li><a href="https://github.com/dschep">@dschep</a> - Lead developer &amp; maintainer</li> <li><a href="https://github.com/azurelogic">@azurelogic</a> - logging &amp; documentation fixes</li> <li><a href="https://github.com/abetomo">@abetomo</a> - style &amp; linting</li> <li><a href="https://github.com/angstwad">@angstwad</a> - <code class="highlighter-rouge">deploy --function</code> support</li> <li><a href="https://github.com/mather">@mather</a> - the cache invalidation option</li> <li><a href="https://github.com/rmax">@rmax</a> - the extra pip args option</li> <li><a href="https://github.com/bsamuel-ui">@bsamuel-ui</a> - Python 3 support</li> <li><a href="https://github.com/suxor42">@suxor42</a> - fixing permission issues with Docker on Linux</li> <li><a href="https://github.com/mbeltran213">@mbeltran213</a> - fixing docker linux -u option bug</li> </ul> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
