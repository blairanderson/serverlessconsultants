<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Plugin Aws Alerts - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-plugin-aws-alerts/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Plugin Aws Alerts - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 7, Stargazer Count: 49, Forks Count: 15, Watchers Count: 49."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Plugin Aws Alerts</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/ACloudGuru/serverless-plugin-aws-alerts"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/ACloudGuru/serverless-plugin-aws-alerts </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 3219" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">3219</dd> </dl> <dl title="Open Issue Count: 7" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">7</dd> </dl> <dl title="Stargazer Count: 49" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">49</dd> </dl> <dl title="Forks Count: 15" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">15</dd> </dl> <dl title="Watchers Count: 49" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">49</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="serverless-aws-alerts-plugin">Serverless AWS Alerts Plugin</h1> <p><a href="https://npmjs.org/package/serverless-plugin-aws-alerts"><img src="https://badge.fury.io/js/serverless-plugin-aws-alerts.svg" alt="NPM version" /></a> <a href="https://travis-ci.org/ACloudGuru/serverless-plugin-aws-alerts"><img src="https://travis-ci.org/ACloudGuru/serverless-plugin-aws-alerts.svg?branch=master" alt="Build Status" /></a> <a href="https://david-dm.org/ACloudGuru/serverless-plugin-aws-alerts"><img src="https://david-dm.org/ACloudGuru/serverless-plugin-aws-alerts.svg?theme=shields.io" alt="Dependency Status" /></a> <a href="https://coveralls.io/r/ACloudGuru/serverless-plugin-aws-alerts"><img src="https://coveralls.io/repos/ACloudGuru/serverless-plugin-aws-alerts/badge.svg" alt="Coverage percentage" /></a></p> <p>A Serverless plugin to easily add CloudWatch alarms to functions</p> <h2 id="installation">Installation</h2> <p><code class="highlighter-rouge">npm i serverless-plugin-aws-alerts</code></p> <h2 id="usage">Usage</h2> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">service</span><span class="pi">:</span> <span class="s">your-service</span>
<span class="s">provider</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">aws</span>
  <span class="s">runtime</span><span class="pi">:</span> <span class="s">nodejs4.3</span>

<span class="s">custom</span><span class="pi">:</span>
  <span class="s">alerts</span><span class="pi">:</span>
    <span class="s">stages</span><span class="pi">:</span> <span class="c1"># Optionally - select which stages to deploy alarms to</span>
      <span class="pi">-</span> <span class="s">producton</span>
      <span class="pi">-</span> <span class="s">staging</span>

    <span class="s">dashboards</span><span class="pi">:</span> <span class="s">true</span>

    <span class="s">topics</span><span class="pi">:</span>
      <span class="s">ok</span><span class="pi">:</span> <span class="s">${self:service}-${opt:stage}-alerts-ok</span>
      <span class="s">alarm</span><span class="pi">:</span> <span class="s">${self:service}-${opt:stage}-alerts-alarm</span>
      <span class="s">insufficientData</span><span class="pi">:</span> <span class="s">${self:service}-${opt:stage}-alerts-insufficientData</span>
    <span class="s">definitions</span><span class="pi">:</span>  <span class="c1"># these defaults are merged with your definitions</span>
      <span class="s">functionErrors</span><span class="pi">:</span>
        <span class="s">period</span><span class="pi">:</span> <span class="s">300</span> <span class="c1"># override period</span>
      <span class="s">customAlarm</span><span class="pi">:</span>
        <span class="s">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">My</span><span class="nv"> </span><span class="s">custom</span><span class="nv"> </span><span class="s">alarm'</span>
        <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
        <span class="s">metric</span><span class="pi">:</span> <span class="s">duration</span>
        <span class="s">threshold</span><span class="pi">:</span> <span class="s">200</span>
        <span class="s">statistic</span><span class="pi">:</span> <span class="s">Average</span>
        <span class="s">period</span><span class="pi">:</span> <span class="s">300</span>
        <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
        <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
    <span class="s">alarms</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">functionThrottles</span>
      <span class="pi">-</span> <span class="s">functionErrors</span>
      <span class="pi">-</span> <span class="s">functionInvocations</span>
      <span class="pi">-</span> <span class="s">functionDuration</span>

<span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-plugin-aws-alerts</span>

<span class="s">functions</span><span class="pi">:</span>
  <span class="s">foo</span><span class="pi">:</span>
    <span class="s">handler</span><span class="pi">:</span> <span class="s">foo.handler</span>
    <span class="s">alarms</span><span class="pi">:</span> <span class="c1"># merged with function alarms</span>
      <span class="pi">-</span> <span class="s">customAlarm</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">fooAlarm</span> <span class="c1"># creates new alarm or overwrites some properties of the alarm (with the same name) from definitions</span>
        <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
        <span class="s">metric</span><span class="pi">:</span> <span class="s">errors</span> <span class="c1"># define custom metrics here</span>
        <span class="s">threshold</span><span class="pi">:</span> <span class="s">1</span>
        <span class="s">statistic</span><span class="pi">:</span> <span class="s">Minimum</span>
        <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
        <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
        <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
</code></pre></div> <h2 id="sns-topics">SNS Topics</h2> <p>If topic name is specified, plugin assumes that topic does not exist and will create it. To use existing topics, specify ARNs instead.</p> <h2 id="sns-notifications">SNS Notifications</h2> <p>You can configure subscriptions to your SNS topics within your <code class="highlighter-rouge">serverless.yml</code>. For each subscription, you’ll need to specify a <code class="highlighter-rouge">protocol</code> and an <code class="highlighter-rouge">endpoint</code>.</p> <p>The following example will send email notifications to <code class="highlighter-rouge">me@example.com</code> for all messages to the Alarm topic:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">alerts</span><span class="pi">:</span>
    <span class="s">topics</span><span class="pi">:</span>
      <span class="s">alarm</span><span class="pi">:</span>
        <span class="s">topic</span><span class="pi">:</span> <span class="s">${self:service}-${opt:stage}-alerts-alarm</span>
        <span class="s">notifications</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">protocol</span><span class="pi">:</span> <span class="s">email</span>
            <span class="s">endpoint</span><span class="pi">:</span> <span class="s">me@example.com</span>
</code></pre></div> <p>You can configure notifications to send to webhook URLs, to SMS devices, to other Lambda functions, and more. Check out the AWS docs <a href="http://docs.aws.amazon.com/sns/latest/api/API_Subscribe.html">here</a> for configuration options.</p> <h2 id="metric-log-filters">Metric Log Filters</h2> <p>You can monitor a log group for a function for a specific pattern. Do this by adding the pattern key. You can learn about custom patterns at: http://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html</p> <p>The following would create a custom metric log filter based alarm named <code class="highlighter-rouge">barAlarm</code>. Any function that included this alarm would have its logs scanned for the pattern <code class="highlighter-rouge">exception Bar</code> and if found would trigger an alarm.</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">alerts</span><span class="pi">:</span>
    <span class="s">function</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">barAlarm</span>
        <span class="s">metric</span><span class="pi">:</span> <span class="s">barExceptions</span>
        <span class="s">threshold</span><span class="pi">:</span> <span class="s">0</span>
        <span class="s">statistic</span><span class="pi">:</span> <span class="s">Minimum</span>
        <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
        <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
        <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanThreshold</span>
        <span class="s">pattern</span><span class="pi">:</span> <span class="s1">'</span><span class="s">exception</span><span class="nv"> </span><span class="s">Bar'</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">bunyanErrors</span>
        <span class="s">metric</span><span class="pi">:</span> <span class="s">BunyanErrors</span>
        <span class="s">threshold</span><span class="pi">:</span> <span class="s">0</span>
        <span class="s">statistic</span><span class="pi">:</span> <span class="s">Sum</span>
        <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
        <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
        <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanThreshold</span>
        <span class="s">pattern</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{$.level</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">40}'</span>
</code></pre></div> <blockquote> <p>Note: For custom log metrics, namespace property will automatically be set to stack name (e.g. <code class="highlighter-rouge">fooservice-dev</code>).</p> </blockquote> <h2 id="default-definitions">Default Definitions</h2> <p>The plugin provides some default definitions that you can simply drop into your application. For example:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">alerts</span><span class="pi">:</span>
  <span class="s">alerts</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">functionErrors</span>
    <span class="pi">-</span> <span class="s">functionThrottles</span>
    <span class="pi">-</span> <span class="s">functionInvocations</span>
    <span class="pi">-</span> <span class="s">functionDuration</span>
</code></pre></div> <p>If these definitions do not quite suit i.e. the threshold is too high, you can override a setting without creating a completely new definition.</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">alerts</span><span class="pi">:</span>
  <span class="s">definitions</span><span class="pi">:</span>  <span class="c1"># these defaults are merged with your definitions</span>
    <span class="s">functionErrors</span><span class="pi">:</span>
      <span class="s">period</span><span class="pi">:</span> <span class="s">300</span> <span class="c1"># override period</span>
      <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">notBreaching</span> <span class="c1"># override treatMissingData</span>
</code></pre></div> <p>The default definitions are below.</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">definitions</span><span class="pi">:</span>
  <span class="s">functionInvocations</span><span class="pi">:</span>
    <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
    <span class="s">metric</span><span class="pi">:</span> <span class="s">Invocations</span>
    <span class="s">threshold</span><span class="pi">:</span> <span class="s">100</span>
    <span class="s">statistic</span><span class="pi">:</span> <span class="s">Sum</span>
    <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
    <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
    <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">missing</span>
  <span class="s">functionErrors</span><span class="pi">:</span>
    <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
    <span class="s">metric</span><span class="pi">:</span> <span class="s">Errors</span>
    <span class="s">threshold</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">statistic</span><span class="pi">:</span> <span class="s">Maximum</span>
    <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
    <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
    <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">missing</span>
  <span class="s">functionDuration</span><span class="pi">:</span>
    <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
    <span class="s">metric</span><span class="pi">:</span> <span class="s">Duration</span>
    <span class="s">threshold</span><span class="pi">:</span> <span class="s">500</span>
    <span class="s">statistic</span><span class="pi">:</span> <span class="s">Maximum</span>
    <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
    <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
    <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">missing</span>
  <span class="s">functionThrottles</span><span class="pi">:</span>
    <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
    <span class="s">metric</span><span class="pi">:</span> <span class="s">Throttles</span>
    <span class="s">threshold</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">statistic</span><span class="pi">:</span> <span class="s">Sum</span>
    <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
    <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanOrEqualToThreshold</span>
    <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">missing</span>
</code></pre></div> <h2 id="using-percentile-statistic-for-a-metric">Using Percentile Statistic for a Metric</h2> <p>Statistic not only supports SampleCount, Average, Sum, Minimum or Maximum as defined in CloudFormation <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-statistic">here</a>, but also percentiles. This is possible by leveraging <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cw-alarm.html#cfn-cloudwatch-alarms-extendedstatistic">ExtendedStatistic</a> under the hood. This plugin will automatically choose the correct key for you. See an example below:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">definitions</span><span class="pi">:</span>
  <span class="s">functionDuration</span><span class="pi">:</span>
    <span class="s">namespace</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AWS/Lambda'</span>
    <span class="s">metric</span><span class="pi">:</span> <span class="s">Duration</span>
    <span class="s">threshold</span><span class="pi">:</span> <span class="s">100</span>
    <span class="s">statistic</span><span class="pi">:</span> <span class="s1">'</span><span class="s">p95'</span>
    <span class="s">period</span><span class="pi">:</span> <span class="s">60</span>
    <span class="s">evaluationPeriods</span><span class="pi">:</span> <span class="s">1</span>
    <span class="s">comparisonOperator</span><span class="pi">:</span> <span class="s">GreaterThanThreshold</span>
    <span class="s">treatMissingData</span><span class="pi">:</span> <span class="s">missing</span>
</code></pre></div> <h2 id="license">License</h2> <p>MIT © <a href="https://acloud.guru/">A Cloud Guru</a></p> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
