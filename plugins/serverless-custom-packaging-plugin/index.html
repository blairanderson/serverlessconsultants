<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Custom Packaging Plugin - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-custom-packaging-plugin/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Custom Packaging Plugin - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 1, Stargazer Count: 3, Forks Count: 0, Watchers Count: 3."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Custom Packaging Plugin</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/hypoport/serverless-custom-packaging-plugin"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/hypoport/serverless-custom-packaging-plugin </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 47" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">47</dd> </dl> <dl title="Open Issue Count: 1" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">1</dd> </dl> <dl title="Stargazer Count: 3" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">3</dd> </dl> <dl title="Forks Count: 0" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">0</dd> </dl> <dl title="Watchers Count: 3" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">3</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="serverless-custom-packaging-plugin">serverless-custom-packaging-plugin</h1> <p><a href="http://www.serverless.com"><img src="http://public.serverless.com/badges/v3.svg" alt="serverless" /></a> <a href="https://badge.fury.io/js/serverless-custom-packaging-plugin"><img src="https://badge.fury.io/js/serverless-custom-packaging-plugin.svg" alt="npm version" /></a> <a href=""><img src="https://img.shields.io/github/downloads/hypoport/serverless-custom-packaging-plugin/total.svg" alt="Github All Releases" /></a> <a href=""><img src="https://img.shields.io/npm/l/serverless-custom-packaging-plugin.svg" alt="license" /></a></p> <h2 id="what-is-this-plugins-purpose">What is this plugins purpose?</h2> <p>This plugin was originally built to allow deployment of arbitrarily nested python lambdas using serverless. The functionality is related to the one discussed in <a href="https://github.com/serverless/serverless/issues/3366">this serverless issue (#3366)</a>.</p> <h3 id="the-problem">The Problem</h3> <p>Vanilla serverless packages your source-code, but retains the folder structure inside the zip-file. However, AWS Lambda can only find the entry-point to your function if it is packaged in a zip-files at root level (see <a href="http://docs.aws.amazon.com/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html">the AWS-Lambda docs</a>).</p> <h3 id="how-it-was-solved">How it was solved</h3> <p>You define a <code class="highlighter-rouge">path</code> that you want to package inside of serverless’s <code class="highlighter-rouge">package</code> property. The plugin then packages your code, such that te defined path becomes the root-path (<code class="highlighter-rouge">.</code>) of the package zip-file.</p> <h3 id="what-else-it-can-do">What else it can do</h3> <ol> <li><strong>Custom artifact path</strong>. You can define an <code class="highlighter-rouge">artifact</code> property. The zip-file will be placed there.</li> <li>If you want to <strong>include only certain file-names or extensions</strong> you may define them using the <code class="highlighter-rouge">include_globs</code> property.</li> <li>If you have <strong>additional libraries</strong> you need inside the lambda environment you may define a path in the <code class="highlighter-rouge">libs</code> property. The contents of this folder will be packaged alongside your functions code (in the root of the zip-file). This lets you include arbitrary python modules (i.e. built against the Lambda AMI inside of docker), but keep them away from your code during development.</li> </ol> <h2 id="installation">Installation</h2> <div class="highlighter-rouge"><pre class="highlight"><code>npm install serverless-custom-packaging-plugin --save-dev
</code></pre></div> <p>This installs the plugin into your <code class="highlighter-rouge">node_modules</code> and adds the dev-dependency to your <code class="highlighter-rouge">package.json</code>.</p> <h2 id="how-to-use-it">How to use it</h2> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-custom-packaging-plugin</span>
<span class="nn">...</span>
<span class="s">functions</span><span class="pi">:</span>
  <span class="s">myFunction</span><span class="pi">:</span>
    <span class="s">...</span>
    <span class="s">package</span><span class="pi">:</span>
      <span class="s">path</span><span class="pi">:</span> <span class="s">path/to/my/code</span>
      <span class="s">artifact</span><span class="pi">:</span> <span class="s">path/to/my/artifact.zip</span>
      <span class="s">libs</span><span class="pi">:</span> <span class="s">path/to/libs</span> 
      <span class="s">include_globs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">**/*.py"</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">**/*.json"</span>
</code></pre></div> <h2 id="tested-with-">Tested with …</h2> <table> <thead> <tr> <th style="text-align: center">Serverless version</th> <th style="text-align: center"><code class="highlighter-rouge">serverless deploy</code></th> <th style="text-align: center"><code class="highlighter-rouge">serverless package -f &lt;function-name&gt;</code></th> <th style="text-align: center"><code class="highlighter-rouge">serverless deploy function -f &lt;function_name&gt;</code></th> <th style="text-align: right">comment</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">1.10.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: center"> </td> <td style="text-align: right"> </td> </tr> <tr> <td style="text-align: center">1.11.0</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: right">not tested</td> </tr> <tr> <td style="text-align: center">1.12.0</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: right">not tested</td> </tr> <tr> <td style="text-align: center">1.13.0</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: right">not tested</td> </tr> <tr> <td style="text-align: center">1.14.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: right"> </td> </tr> <tr> <td style="text-align: center">1.15.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: right"> </td> </tr> <tr> <td style="text-align: center">1.16.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: right"> </td> </tr> <tr> <td style="text-align: center">1.17.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt; / &lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: right">everything works when patched</td> </tr> <tr> <td style="text-align: center">1.18.0</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/46/check-mark-2180770_960_720.png width=25&gt;</td> <td style="text-align: center">&lt;img src=https://cdn.pixabay.com/photo/2017/03/28/01/42/attention-2180765_960_720.png width=25&gt;</td> <td style="text-align: right"><code class="highlighter-rouge">package.individually = true</code> must be set</td> </tr> </tbody> </table> <h3 id="patches">Patches</h3> <p>We have created a couple of patches (so far only for serverless version 1.17.0) to get all the functionality we needed working. You are free to use these patches, but be aware that this could potentially break (other) serverless functionality.</p> <h2 id="a-word-of-caution">A word of caution</h2> <p>This is a work in progress. This means no guarantees that everything will work as promised. If you would like some more functionality you are welcome to contribute. We greatly appreciate any testing you do with different serverless versions and setups.</p> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
