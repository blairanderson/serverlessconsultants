<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Dynamodb Local - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-dynamodb-local/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Dynamodb Local - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 28, Stargazer Count: 112, Forks Count: 54, Watchers Count: 112."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Dynamodb Local</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/99xt/serverless-dynamodb-local"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/99xt/serverless-dynamodb-local </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 6553" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">6553</dd> </dl> <dl title="Open Issue Count: 28" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">28</dd> </dl> <dl title="Stargazer Count: 112" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">112</dd> </dl> <dl title="Forks Count: 54" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">54</dd> </dl> <dl title="Watchers Count: 112" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">112</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="serverless-dynamodb-local">serverless-dynamodb-local</h1> <p><a href="https://gitter.im/99xt/serverless-dynamodb-local?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/99xt/serverless-dynamodb-local.svg" alt="Join the chat at https://gitter.im/99xt/serverless-dynamodb-local" /></a> <a href="https://badge.fury.io/js/serverless-dynamodb-local"><img src="https://badge.fury.io/js/serverless-dynamodb-local.svg" alt="npm version" /></a> <a href="https://www.npmjs.com/package/serverless-dynamodb-local"><img src="https://img.shields.io/npm/l/serverless-dynamodb-local.svg" alt="license" /></a></p> <h2 id="this-plugin-requires">This Plugin Requires</h2> <ul> <li>serverless@v1-rc.1</li> <li>Java Runtime Engine (JRE) version 6.x or newer</li> </ul> <h2 id="features">Features</h2> <ul> <li>Install DynamoDB Local</li> <li>Start DynamoDB Local with all the parameters supported (e.g port, inMemory, sharedDb)</li> <li>Table Creation for DynamoDB Local</li> </ul> <h2 id="install-plugin">Install Plugin</h2> <p><code class="highlighter-rouge">npm install --save serverless-dynamodb-local</code></p> <p>Then in <code class="highlighter-rouge">serverless.yml</code> add following entry to the plugins array: <code class="highlighter-rouge">serverless-dynamodb-local</code></p> <div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-dynamodb-local</span>
</code></pre></div> <h2 id="using-the-plugin">Using the Plugin</h2> <p>1) Install DynamoDB Local <code class="highlighter-rouge">sls dynamodb install</code></p> <p>2) Add DynamoDB Resource definitions to your Serverless configuration, as defined here: https://serverless.com/framework/docs/providers/aws/guide/resources/#configuration</p> <p>3) Start DynamoDB Local and migrate (DynamoDB will process incoming requests until you stop it. To stop DynamoDB, type Ctrl+C in the command prompt window). Make sure above command is executed before this. <code class="highlighter-rouge">sls dynamodb start --migrate</code></p> <p>Note: Read the detailed section for more information on advanced options and configurations. Open a browser and go to the url http://localhost:8000/shell to access the web shell for dynamodb local.</p> <h2 id="install-sls-dynamodb-install">Install: sls dynamodb install</h2> <p>To remove the installed dynamodb local, run: <code class="highlighter-rouge">sls dynamodb remove</code> Note: This is useful if the sls dynamodb install failed in between to completely remove and install a new copy of DynamoDB local.</p> <h2 id="start-sls-dynamodb-start">Start: sls dynamodb start</h2> <p>All CLI options are optional:</p> <div class="highlighter-rouge"><pre class="highlight"><code>--port  		  -p  Port to listen on. Default: 8000
--cors                    -c  Enable CORS support (cross-origin resource sharing) for JavaScript. You must provide a comma-separated "allow" list of specific domains. The default setting for -cors is an asterisk (*), which allows public access.
--inMemory                -i  DynamoDB; will run in memory, instead of using a database file. When you stop DynamoDB;, none of the data will be saved. Note that you cannot specify both -dbPath and -inMemory at once.
--dbPath                  -d  The directory where DynamoDB will write its database file. If you do not specify this option, the file will be written to the current directory. Note that you cannot specify both -dbPath and -inMemory at once. For the path, current working directory is &lt;projectroot&gt;/node_modules/serverless-dynamodb-local/dynamob. For example to create &lt;projectroot&gt;/node_modules/serverless-dynamodb-local/dynamob/&lt;mypath&gt; you should specify -d &lt;mypath&gt;/ or --dbPath &lt;mypath&gt;/ with a forwardslash at the end.
--sharedDb                -h  DynamoDB will use a single database file, instead of using separate files for each credential and region. If you specify -sharedDb, all DynamoDB clients will interact with the same set of tables regardless of their region and credential configuration.
--delayTransientStatuses  -t  Causes DynamoDB to introduce delays for certain operations. DynamoDB can perform some tasks almost instantaneously, such as create/update/delete operations on tables and indexes; however, the actual DynamoDB service requires more time for these tasks. Setting this parameter helps DynamoDB simulate the behavior of the Amazon DynamoDB web service more closely. (Currently, this parameter introduces delays only for global secondary indexes that are in either CREATING or DELETING status.)
--optimizeDbBeforeStartup -o  Optimizes the underlying database tables before starting up DynamoDB on your computer. You must also specify -dbPath when you use this parameter.
--migrate                 -m  After starting DynamoDB local, create DynamoDB tables from the Serverless configuration.
--seed                    -s  After starting and migrating dynamodb local, injects seed data into your tables. The --seed option determines which data categories to onload.
</code></pre></div> <p>All the above options can be added to serverless.yml to set default configuration: e.g.</p> <div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">dynamodb</span><span class="pi">:</span>
    <span class="s">start</span><span class="pi">:</span>
      <span class="s">port</span><span class="pi">:</span> <span class="s">8000</span>
      <span class="s">inMemory</span><span class="pi">:</span> <span class="s">true</span>
      <span class="s">migrate</span><span class="pi">:</span> <span class="s">true</span>
      <span class="s">seed</span><span class="pi">:</span> <span class="s">true</span>
    <span class="c1"># Uncomment only if you already have a DynamoDB running locally</span>
    <span class="c1"># noStart: true</span>
</code></pre></div> <h2 id="migrations-sls-dynamodb-migrate">Migrations: sls dynamodb migrate</h2> <h3 id="configuration">Configuration</h3> <p>In <code class="highlighter-rouge">serverless.yml</code> add following to execute all the migration upon DynamoDB Local Start</p> <div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">dynamodb</span><span class="pi">:</span>
    <span class="s">start</span><span class="pi">:</span>
      <span class="s">migrate</span><span class="pi">:</span> <span class="s">true</span>
</code></pre></div> <h3 id="awsdynamodbtable-resource-template-for-serverlessyml">AWS::DynamoDB::Table Resource Template for serverless.yml</h3> <div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">resources</span><span class="pi">:</span>
  <span class="s">Resources</span><span class="pi">:</span>
    <span class="s">usersTable</span><span class="pi">:</span>
      <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::DynamoDB::Table</span>
      <span class="s">Properties</span><span class="pi">:</span>
        <span class="s">TableName</span><span class="pi">:</span> <span class="s">usersTable</span>
        <span class="s">AttributeDefinitions</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">AttributeName</span><span class="pi">:</span> <span class="s">email</span>
            <span class="s">AttributeType</span><span class="pi">:</span> <span class="s">S</span>
        <span class="s">KeySchema</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">AttributeName</span><span class="pi">:</span> <span class="s">email</span>
            <span class="s">KeyType</span><span class="pi">:</span> <span class="s">HASH</span>
        <span class="s">ProvisionedThroughput</span><span class="pi">:</span>
          <span class="s">ReadCapacityUnits</span><span class="pi">:</span> <span class="s">1</span>
          <span class="s">WriteCapacityUnits</span><span class="pi">:</span> <span class="s">1</span>
</code></pre></div> <p><strong>Note:</strong> DynamoDB local doesn’t support TTL specification, therefore plugin will simply ignore ttl configuration from Cloudformation template.</p> <h2 id="seeding-sls-dynamodb-seed">Seeding: sls dynamodb seed</h2> <h3 id="configuration-1">Configuration</h3> <p>In <code class="highlighter-rouge">serverless.yml</code> seeding categories are defined under <code class="highlighter-rouge">dynamodb.seed</code>.</p> <p>If <code class="highlighter-rouge">dynamodb.start.seed</code> is true, then seeding is performed after table migrations.</p> <div class="language-yml highlighter-rouge"><pre class="highlight"><code><span class="s">dynamodb</span><span class="pi">:</span>
  <span class="s">start</span><span class="pi">:</span>
    <span class="s">seed</span><span class="pi">:</span> <span class="s">true</span>

  <span class="s">seed</span><span class="pi">:</span>
    <span class="s">domain</span><span class="pi">:</span>
      <span class="s">sources</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">table</span><span class="pi">:</span> <span class="s">domain-widgets</span>
          <span class="s">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">./domainWidgets.json</span><span class="pi">]</span>
        <span class="pi">-</span> <span class="s">table</span><span class="pi">:</span> <span class="s">domain-fidgets</span>
          <span class="s">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">./domainFidgets.json</span><span class="pi">]</span>
    <span class="s">test</span><span class="pi">:</span>
      <span class="s">sources</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">table</span><span class="pi">:</span> <span class="s">users</span>
          <span class="s">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">./fake-test-users.json</span><span class="pi">]</span>
        <span class="pi">-</span> <span class="s">table</span><span class="pi">:</span> <span class="s">subscriptions</span>
          <span class="s">sources</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">./fake-test-subscriptions.json</span><span class="pi">]</span>
</code></pre></div> <div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">&gt; </span>sls dynamodb seed --seed<span class="o">=</span>domain,test
<span class="gp">&gt; </span>sls dynamodb start --seed<span class="o">=</span>domain,test
</code></pre></div> <p>If seed config is set to true, your configuration will be seeded automatically on startup. You can also put the seed to false to prevent initial seeding to use manual seeding via cli.</p> <p>```fake-test-users.json example [ { “id”: “John”, “name”: “Doe”, }, ]</p> <div class="highlighter-rouge"><pre class="highlight"><code>
## Using DynamoDB Local in your code
You need to add the following parameters to the AWS NODE SDK dynamodb constructor

e.g. for dynamodb document client sdk
</code></pre></div> <p>var AWS = require(‘aws-sdk’);</p> <div class="highlighter-rouge"><pre class="highlight"><code></code></pre></div> <p>new AWS.DynamoDB.DocumentClient({ region: ‘localhost’, endpoint: ‘http://localhost:8000’ })</p> <div class="highlighter-rouge"><pre class="highlight"><code>e.g. for dynamodb document client sdk
</code></pre></div> <p>new AWS.DynamoDB({ region: ‘localhost’, endpoint: ‘http://localhost:8000’ })</p> <div class="highlighter-rouge"><pre class="highlight"><code>
### Using with serverless-offline plugin
When using this plugin with serverless-offline, it is difficult to use above syntax since the code should use DynamoDB Local for development, and use DynamoDB Online after provisioning in AWS. Therefore we suggest you to use [serverless-dynamodb-client](https://github.com/99xt/serverless-dynamodb-client) plugin in your code.

The `serverless dynamodb start` command can be triggered automatically when using `serverless-offline` plugin.
Please note that you still need to install DynamoDB Local first.

Add both plugins to your `serverless.yml` file:
```yaml
plugins:
  - serverless-dynamodb-local
  - serverless-offline
</code></pre></div> <p>Make sure that <code class="highlighter-rouge">serverless-dynamodb-local</code> is above <code class="highlighter-rouge">serverless-offline</code> so it will be loaded earlier.</p> <p>Now your local DynamoDB database will be automatically started before running <code class="highlighter-rouge">serverless offline</code>.</p> <h3 id="using-with-serverless-offline-and-serverless-webpack-plugin">Using with serverless-offline and serverless-webpack plugin</h3> <p>Run <code class="highlighter-rouge">serverless offline start</code>. In comparison with <code class="highlighter-rouge">serverless offline</code>, the <code class="highlighter-rouge">start</code> command will fire an <code class="highlighter-rouge">init</code> and a <code class="highlighter-rouge">end</code> lifecycle hook which is needed for serverless-offline and serverless-dynamodb-local to switch off both ressources.</p> <p>Add plugins to your <code class="highlighter-rouge">serverless.yml</code> file:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-webpack</span>
  <span class="pi">-</span> <span class="s">serverless-dynamodb-local</span>
  <span class="pi">-</span> <span class="s">serverless-offline</span> <span class="c1">#serverless-offline needs to be last in the list</span>
</code></pre></div> <h2 id="reference-project">Reference Project</h2> <ul> <li><a href="https://github.com/99xt/serverless-react-boilerplate">serverless-react-boilerplate</a></li> </ul> <h2 id="links">Links</h2> <ul> <li><a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html">Dynamodb local documentation</a></li> <li><a href="mailto:ashanf@99x.lk">Contact Us</a></li> <li><a href="https://www.npmjs.com/package/serverless-dynamodb-local">NPM Registry</a></li> </ul> <h2 id="license">License</h2> <p><a href="LICENSE">MIT</a></p> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
