<!DOCTYPE html> <html> <head> <script type="text/javascript"> var host = 'www.serverlessconsultants.com'; if (host == window.location.host && window.location.protocol != 'https:') { window.location.protocol = 'https'; } </script> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="Serverless Directory"> <meta name="msvalidate.01" content="0C81C6A5BD3BAF86F4730D8C4A9BF223" /> <meta name="google-site-verification" content=""> <title>Serverless Domain Manager - Serverless Plugin Directory</title> <!-- Google+ Authorship --> <link rel="author" href="Serverless Directory"> <link rel="publisher" href="Serverless Directory"> <!-- Canonical --> <link rel="canonical" href="https://www.serverlessconsultants.com/plugins/serverless-domain-manager/"> <!-- Fonts --> <link href='https://fonts.googleapis.com/css?family=Libre+Franklin:400,100,100italic,200,200italic,300,300italic,400italic,500,600,500italic,600italic,700,700italic,800,900,800italic,900italic' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=PT+Sans+Caption:400,700' rel='stylesheet' type='text/css'> <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'> <!-- Styles --> <link rel="stylesheet" href=" /css/main.css "> <!-- Feed --> <link rel="alternate" type="application/rss+xml" title="ServerLess Directory" href="https://www.serverlessconsultants.com /feed.xml "> <!-- Fav Icon and Apple Touch Icons --> <link rel="icon" type="image/png" href="/img/favicon.png" sizes="128x128" /> <meta name="application-name" content="ServerLess Directory" /> <!-- Open Graph --> <meta property="og:title" content="Serverless Domain Manager - Serverless Plugin Directory"> <meta property="og:site_name" content="ServerLess Directory"> <meta property="og:type" content="website"> <meta property="og:description" content="Open Issue Count: 5, Stargazer Count: 43, Forks Count: 11, Watchers Count: 43."> </head> <script type="text/javascript"> (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-61052500-12', 'auto'); ga('send', 'pageview'); </script> <body> <!-- Navigation --> <header class="bg-white w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-999 bb b--light-gray"> <nav class="tc"> <a class="dib no-underline v-mid tc bw1 ba b gold ph1 pv2 outline b--gold" href="/" rel="nofollow"> <div>SRVR</div> <div>LSS</div> </a> <a class="link dim black b f6 f5-ns dib mr3" href="/" title="Serverless Directory">Serverless Directory</a> <a class="link dim gray f6 f5-ns dib mr3" href="/plugins/">Serverless Plugins</a> <a class="link dim gray f6 f5-ns dib mr3" href="/frameworks/">Serverless Frameworks</a> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/consultants/">Serverless Consultants</a> --> <!-- <a class="link dim gray f6 f5-ns dib mr3" href="/contact" title="Contact Serverless Frameworks Directory">Contact</a> --> </nav> </header> <div class="mw8 center"> <h1 class="tc ma0">Serverless Domain Manager</h1> <div class="tc"> <a rel="nofollow noreferrer noopener" href="https://github.com/amplify-education/serverless-domain-manager"> <img src="https://icon.now.sh/home" alt="homepage icon"> https://github.com/amplify-education/serverless-domain-manager </a> </div> <article class="ph3 ph5-ns"> <h3 class="f6 ma0 pa0 ttu tc tracked">Tracked</h3> <div class="cf tc"> <dl title="NPM Downloads Last Month: 827" class="db tc mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">NPM Downloads Last Month</dd> <dd class="f3 fw6 ml0">827</dd> </dl> <dl title="Open Issue Count: 5" class="fl fn-l w-50 mb0 dib-l w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Issues</dd> <dd class="f3 fw6 ml0">5</dd> </dl> <dl title="Stargazer Count: 43" class="fl fn-l w-50 dib-l mb0 w-auto-l lh-title mr5-l"> <dd class="f6 fw4 ml0">Stars</dd> <dd class="f3 fw6 ml0">43</dd> </dl> <dl title="Forks Count: 11" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title mr5-l"> <dd class="f6 fw4 ml0">Forks</dd> <dd class="f3 fw6 ml0">11</dd> </dl> <dl title="Watchers Count: 43" class="fl fn-l w-50 dib-l w-auto-l mb0 lh-title"> <dd class="f6 fw4 ml0">Watchers</dd> <dd class="f3 fw6 ml0">43</dd> </dl> </div> </article> <!-- TODO: FIX THIS --> <div class="cf tc mw6 center dn"> </div> </div> <h3 class="tc">Repo README Contents:</h3> <section class="mw8 center ph3 pv2 overflow-x-scroll ba br3" id="readme-content"> <h1 id="serverless-domain-manager">serverless-domain-manager</h1> <p><a href="http://www.serverless.com"><img src="http://public.serverless.com/badges/v3.svg" alt="serverless" /></a> <a href="https://travis-ci.org/amplify-education/serverless-domain-manager"><img src="https://travis-ci.org/amplify-education/serverless-domain-manager.svg?branch=master" alt="Build Status" /></a> <a href="https://badge.fury.io/js/serverless-domain-manager"><img src="https://badge.fury.io/js/serverless-domain-manager.svg" alt="npm version" /></a> <a href="https://raw.githubusercontent.com/amplify-education/serverless-domain-manager/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT licensed" /></a> <a href="https://www.codacy.com/app/CFER/serverless-domain-manager?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=amplify-education/serverless-domain-manager&amp;utm_campaign=badger"><img src="https://api.codacy.com/project/badge/Grade/235fe249b8354a3db0cc5926dba47899" alt="Codacy Badge" /></a> <a href="https://www.npmjs.com/package/serverless-domain-manager"><img src="https://img.shields.io/npm/dt/serverless-domain-manager.svg?style=flat" alt="npm downloads" /></a></p> <p>Create custom domain names that your lambda can deploy to with serverless. Allows for base path mapping when deploying and deletion of domain names.</p> <h1 id="about-amplify">About Amplify</h1> <p>Amplify builds innovative and compelling digital educational products that empower teachers and students across the country. We have a long history as the leading innovator in K-12 education - and have been described as the best tech company in education and the best education company in tech. While others try to shrink the learning experience into the technology, we use technology to expand what is possible in real classrooms with real students and teachers.</p> <p>Learn more at https://www.amplify.com</p> <h1 id="getting-started">Getting Started</h1> <h2 id="prerequisites">Prerequisites</h2> <p>Make sure you have the following installed before starting:</p> <ul> <li><a href="https://nodejs.org/en/download/">nodejs</a></li> <li><a href="https://www.npmjs.com/get-npm?utm_source=house&amp;utm_medium=homepage&amp;utm_campaign=free%20orgs&amp;utm_term=Install%20npm">npm</a></li> <li><a href="https://serverless.com/framework/docs/providers/aws/guide/installation/">serverless</a></li> </ul> <p>The IAM role that is deploying the lambda will need the following permissions:</p> <div class="highlighter-rouge"><pre class="highlight"><code>acm: ListCertificate
apigateway: GET
apigateway: POST
route53: ListHostedZones
route53: ChangeResourceRecordSets
</code></pre></div> <h2 id="installing">Installing</h2> <div class="highlighter-rouge"><pre class="highlight"><code># From npm (recommended)
npm install serverless-domain-manager

# From github
npm install https://github.com/amplify-education/serverless-domain-manager.git
</code></pre></div> <p>Then make the following edits to your serverless.yaml file:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">serverless-domain-manager</span>

<span class="s">custom</span><span class="pi">:</span>
  <span class="s">customDomain</span><span class="pi">:</span>
    <span class="s">basePath</span><span class="pi">:</span>
    <span class="s">domainName</span><span class="pi">:</span>
    <span class="s">stage</span><span class="pi">:</span>
    <span class="s">certificateName</span><span class="pi">:</span>
    <span class="s">createRoute53Record</span><span class="pi">:</span> <span class="s">true</span>
</code></pre></div> <p>For example:</p> <div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">custom</span><span class="pi">:</span>
  <span class="s">customDomain</span><span class="pi">:</span>
    <span class="s">basePath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>
    <span class="s">domainName</span><span class="pi">:</span> <span class="s">serverless.foo.com</span>
    <span class="s">stage</span><span class="pi">:</span> <span class="s">dev</span>
</code></pre></div> <p>If certificateName is not provided, the certificate will be chosen using the domain name. If certificateName is blank, an error will be thrown. If createRoute53Record is blank or not provided, it defaults to true.</p> <h2 id="running">Running</h2> <p>To create the custom domain:</p> <div class="highlighter-rouge"><pre class="highlight"><code>serverless create_domain
</code></pre></div> <p>To deploy with the custom domain:</p> <div class="highlighter-rouge"><pre class="highlight"><code>severless deploy
</code></pre></div> <p>To remove the created custom domain:</p> <div class="highlighter-rouge"><pre class="highlight"><code>serverless delete_domain
</code></pre></div> <h1 id="how-it-works">How it works</h1> <p>Creating the custom domain takes advantage of Amazonâ€™s Certificate Manager to assign a certificate to the given domain name. Based on already created certificate names, the plugin will search for the certificate that resembles the custom domainâ€™s name the most and assign the ARN to that domain name. The plugin then creates the proper CNAMEs for the domain through Route 53. Once the domain name is set it takes up to 40 minutes before it is initialized. After the certificate is initialized, <code class="highlighter-rouge">sls deploy</code> will create the base path mapping and assign the lambda to the custom domain name through Cloudfront.</p> <h2 id="running-tests">Running Tests</h2> <p>To run the test:</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm test
</code></pre></div> <p>All tests should pass.</p> <p>If there is an error update the node_module inside the serverless-vpc-discovery folder:</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install
</code></pre></div> <h1 id="known-issues">Known Issues</h1> <ul> <li>(5/23/2017) CloudFormation does not support changing the base path from empty to something or vice a versa. You must run <code class="highlighter-rouge">sls remove</code> to remove the base path mapping.</li> <li>(5/23/2017) Amazon Certificate Manager only allows certificates from the <code class="highlighter-rouge">us-east-1</code> region certificates for use with CloudFront, and by extension, API Gateway Custom Domains (Results in a BadRequestException: Certificate name must be specifiedâ€¦).</li> </ul> <h1 id="responsible-disclosure">Responsible Disclosure</h1> <p>If you have any security issue to report, contact project maintainers privately. You can reach us at <a href="mailto:github@amplify.com">github@amplify.com</a></p> <h1 id="contributing">Contributing</h1> <p>We welcome pull requests! For your pull request to be accepted smoothly, we suggest that you:</p> <ol> <li>For any sizable change, first open a GitHub issue to discuss your idea.</li> <li>Create a pull request. Explain why you want to make the change and what itâ€™s for. Weâ€™ll try to answer any PRâ€™s promptly.</li> </ol> </section> <footer class="cf w-100"> <div class="cover bg-left bg-center-l pv5" style="background-image: url(/img/bg.png)"> <form action="//tachyonstemplates.us16.list-manage.com/subscribe/post?u=3ff847fac68c99ba4cbf378be&amp;id=8eb026def6" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="center pa3" target="_blank" novalidate> <div> <h3 class="pa0 f3 f2-ns mb3 mt0 white tc">Want more Serverless?</h3> <h5 class="pa0 f4 f3-ns mb3 white tc">Subscribe to our mailing list to receive an update when new items arrive!</h5> <div class="cf mw7 center"> <label class="clip" for="email-address">Email Address</label> <input placeholder="Your Email Address" type="email" name="EMAIL" class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns"> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3ff847fac68c99ba4cbf378be_8eb026def6" tabindex="-1" value=""></div> <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" name="subscribe" type="submit" value="Subscribe"> </div> </div> </form> </div> <div class="pb4 pt2 ph3 ph5-ns tc lh-copy"> <a class="pv2 db ph3 dim" href="/">Serverless Directory - Plugins, Frameworks, Consultants</a> <a class="pv2 db ph3 dim" href="/frameworks/">Serverless Frameworks Directory</a> <a class="pv2 db ph3 dim" href="/plugins/">Serverless Plugin Directory</a> <a class="pv2 db ph3 dim" href="/plugins/topics/">Serverless Plugin Topics</a> </div> </footer> <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script> <!-- keeping this here for prosperity --> </body> </html>
